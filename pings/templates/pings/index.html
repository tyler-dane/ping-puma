{% load static %}
{% block body %}

{% if messages %}
<ul>
    {% for message in messages %}
       <li>{{ message }}</li>
    {% endfor %}
</ul>
{% else %}
<h1>NO MESSAGES</h1>
{% endif %}

<div class="container">



    <div>
        <h1>Send Template Ping</h1>
        <p>
        Select Template to Use:
        <select id="template_select">
            {% for ping in pings %}
                {% if ping.is_template is True %}
                    <option>{{ ping.body }}</option>
                {% else %}
                    <p>No templates</p>
                {% endif %}
            {% endfor %}
        </select>
        <p>
        Select company to send Ping:
        <select id="company_select">
            {% for company in companies %}
                <option>{{ company.company }}</option>
            {% endfor %}
        </select>
        <p>
        Select guest to receive Ping:
        <select id="guest_select">
            {% for guest in guests %}
                <option>{{ guest.lastName }}</option>
            {% endfor %}
        </select>
        <p>
        <button type="submit" class="btn btn-default"
                onclick="sendTemplatePing()">
            Send Template Ping
        </button>
    </div>
    <form action="add-ping/" method="POST">
        <div class="container">
        {% csrf_token %}

        <h1>Send Custom Ping</h1>
            {{ ping_form.as_p }}
            <p></p>
            <button type="submit" class="btn btn-default">Send Custom Ping</button>
        </div>
    </form>

    <div>
        <h1>Custom Ping History</h1>
        A list of all saved custom Pings from this account
        {% if pings %}
        <ul>
            {% for ping in pings %}
                {% if ping.is_template is False %}
                <b>{{ ping.subject }}:</b>
                {{ ping.body }}
                <ul>
                    <li>Guest: {{ ping.guest }}</li>
                    <li>Company: {{ ping.company }}</li>
                </ul>
                <br>
                {% endif%}
            {% endfor %}
        </ul>
        {% else %}
            <p>No pings are available.</p>
        {% endif %}
    </div>

</div>
{% endblock %}

<script src="{% static 'js/jquery-3.4.1.js' %}"></script>
<script src="{% static 'js/main.js' %}"></script>
